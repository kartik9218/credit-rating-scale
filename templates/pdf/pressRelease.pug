doctype html
head 
  meta(charset='UTF-8')
  meta(http-equiv='X-UA-Compatible' content='IE=edge')
  meta(name='viewport' content='width=device-width, initial-scale=1.0')
  title Press Release Document
  style.
    * {
      margin: 0;
      padding: 0;
    }
    @page {
      size: a4;
      margin-bottom: 2in;
    }
    body {
      font-family: arial;
      background-image: url('https://4i-ir.api.cognitensor.in/public/images/press_release_background_img.jpg');
      background-size: cover;
      width: 100%;
      height: 23.7cm;
      margin: 0;
      background-repeat: repeat;
    }
    .head{
      text-align: center;
    }
    img{
      height: 100px;
      width: 100px;
    }
    .table-div{
      overflow-x: auto;
      margin: 1rem
    }
    table {
      border-collapse: collapse;
      width: 100%;
      border: 1px solid black;
      border-spacing: 0;
    }
    thead {
      color: #111;
      height: 25px;
    }
    th, td{
      border: 1px solid black;
      text-align: left;
      padding: 8px;
    }
    p,li{
      line-height: 1.5rem;
    }
    .no-list-style > li{
      list-style: none;
    }
    .no-list-style {
      margin: 0.6rem  1rem;
    }
    .disclaimer{
      font-size: 0.8rem;
      line-height: 1rem;
      border: 1px solid black;
    }



body 
  main
    br
    br
    br
    br
    br
    br
    br
    br
    br
    br
    br
    br
    br
    br
    br
    br
    br
    br
    br
    section(class="head") 
      br
      h3
        u  Name of the company 
      br
      h3 Month XX, 20XX
    div(class='table-div') 
      h4 Ratings
      table
        thead
          tr 
            th Instrument / Facility 
            th Amount (Rs. Crore)
            th Ratings
            th Rating Action  
            th Compexity Indicator (Simple/Complex/Highly Complex)
        tbody
          //- each data in rating_data
          //-   tr
          //-     td #{data.instrument_facility}
          //-     td #{data.amount}
          //-     td #{data.ratings}
          //-     td #{data.rating_action}
          //-     td #{data.complexity_indicator} 
          tr
            td(style="font-weight: 600") Total 
            td(style="font-weight: 600; text-transform: capitalize" class="total_text") 
            td 
            td 
            td 
      h4 Details of Facilities are in Annexure 1
      br
      h4 Detailed Rationale 
      br
      br
      h4 Key Rating Sensitivities:
      br
      h4 Upward Factors
      ul(style="margin-left: 2rem") 
      //-   each factor in upward_factors
      //-     li #{factor}
      //- br
      //- h4 Downward Factors
      //- ul(style="margin-left: 2rem") 
      //-   each factor in downward_factors
      //-     li #{factor}
      br
      br
      h4 List of Key Rating Drivers with Detailed Description
      br
      h4 Key Rating Strengths 
      br
      ul(style="margin-left: 1rem")
        //- each strength in rating_strengths
        //-   li #{strength}
      br
      h4 Key Rating Weaknesses
      br
      ul(style="margin-left: 1rem")
        //- each weakness in rating_weakness
        //-   li #{weakness}
      br
      br
      p 
        strong Analytical Approach: 
        | Standalone/Consolidated
      br
      p 
        strong Applicable Criteria: 
      ul(class="no-list-style") 
        li Rating Methodology for XXX 
        li Financial Ratios & Interpretation (Financial Sector/Non- Financial Sector)
        li Rating methodology for Structure Debt Transaction (Non-securitisation transaction)
        li Policy on provisional ratings
        li Guidelines on what constitutes Non-Cooperation by clients
        li Criteria on Default Recognition and Post-Default Curing Period
      br
      br
      h4 
        u Liquidity 
        | - Strong/Adequate/Poor/Stressed
      br
      br
      h4 
        u About the Company/Firm/Entity/Society
      br
      br
      h4 Financials (Standalone/Combined/Consolidated):
      br
      br
      br
      h4 Status of non-cooperation with previous CRA:
      br
      h4 Any other information: 
      br
      h4 Rating History for last three years: 
      br
  - const moment = require('moment')
    div(class="table-div")
      table
        thead
          tr 
            th Sr. No. 
            th Name of Instrument / Facilities 
            th(colspan="3" ) Current Ratings (Year #{moment().subtract(1, 'year').format('YYYY')} - #{moment().format('YY')}) 
            th(colspan="3") Rating History for the past 3 years
          tr 
            th 
            th 
            th Type 
            th Amount Outstanding (Rs. Crore)
            th Rating 
            th Date(s) & Rating(s) assigned in #{moment().subtract(2, 'year').format('YYYY')} - #{moment().subtract(1, 'year').format('YY')}
            th Date(s) & Rating(s) assigned in #{moment().subtract(3, 'year').format('YYYY')} - #{moment().subtract(2, 'year').format('YY')}
            th Date(s) & Rating(s) assigned in #{moment().subtract(4, 'year').format('YYYY')} - #{moment().subtract(3, 'year').format('YY')}
        tbody
          each history, key in rating_history
          tr
          td #{key + 1}
              td #{history.instrument}
              td #{history.current_type}
              td #{history.amount_outstanding}
              td #{history.rating} / #{history.rating_outlook}
              td #{history.rating} (#{history.rating_outlook})
              td #{history.rating} (#{history.rating_outlook})
              td #{history.rating} (#{history.rating_outlook})


    h4(style="margin-left: 2rem") Name and Contact Details of the Rating Analyst: 
    div(style="display: flex; margin: 1rem 1.7rem;  align-items: center;") 
      div(style="border: 1px solid black; width: 30%; padding:  0.5rem") 
        p Name:
        p Tel: 
        p Email: 
      div(style="border: 1px solid black; width: 30%; padding:  0.5rem") 
        p Name:
        p Tel: 
        p Email:
    section(class="about" style="margin: 1rem 2rem") 
      h4 About Infomerics: 
      p Infomerics was founded in the year 1986 by a team of highly experienced and knowledgeable finance professionals. Subsequently, after obtaining Securities Exchange Board of India registration and RBI accreditation and the activities of the company are extended to External Credit Assessment Institution (ECAI).
        br
        | Adhering to best International Practices and maintaining high degree of ethics, the team of knowledgeable analytical professionals deliver credible evaluation of rating.
        br
        | Infomerics evaluates wide range of debt instruments which helps corporates open horizons to raise capital and provides investors enlightened investment opportunities. The transparent, robust and credible rating has gained the confidence of Investors and Banks. 
        br
        | Infomerics has a pan India presence with Head Office in Delhi, branches in major cities and representatives in several locations.
        br
        | For more information visit 
        a(href="www.infomerics.com" alt="Infomerics official website") www.infomerics.com 
      br
      p(class="disclaimer")
        strong Disclaimer: 
        | Infomerics ratings are based on information provided by the issuer on an ‘as is where is’ basis. Infomerics credit ratings are an opinion on the credit risk of the issue / issuer and not a recommendation to buy, hold or sell securities.  Infomerics reserves the right to change, suspend or withdraw the credit ratings at any point in time. Infomerics ratings are opinions on financial statements based on information provided by the management and information obtained from sources believed by it to be accurate and reliable. The credit quality ratings are not recommendations to sanction, renew, disburse or recall the concerned bank facilities or to buy, sell or hold any security. We, however, do not guarantee the accuracy, adequacy or completeness of any information, which we accepted and presumed to be free from misstatement, whether due to error or fraud. We are not responsible for any errors or omissions or for the results obtained from the use of such information. Most entities whose bank facilities/instruments are rated by us have paid a credit rating fee, based on the amount and type of bank facilities/instruments. In case of partnership/proprietary concerns/Association of Persons (AOPs), the rating assigned by Infomerics is based on the capital deployed by the partners/proprietor/ AOPs and the financial strength of the firm at present. The rating may undergo change in case of withdrawal of capital or the unsecured loans brought in by the partners/proprietor/ AOPs in addition to the financial performance and other relevant factors.
    div(class="table-div")
      h4 Annexure 1: Details of Facilities
      table 
        thead 
          th Name of Facility
          th Date of Issuance 
          th Coupon Rate/ IRR
          th Maturity Date
          th Size of Facility (Rs. Crore)
          th Rating Assigned/Outlook
        tbody 
          td -
          td -
          td -
          td -
          td -
          td -
      br
      br
      h4 Annexure 2: List of companies considered for consolidated analysis: Not Applicable.
      br
      table 
        thead 
          th Name of the company
          th Consolidation Approach 
        tbody 
          td -
          td -
      br
      br
      h4 Annexure 3: Facility wise lender details (Hyperlink to be added)
      br
      h4 Annexure 4: Detailed explanation of covenants of the rated instrument/facilities: Not Applicable
      br
      table 
        thead 
          th(colspan="2") Name of the Instrument 
          th(style="text-align: center;") Detailed Explanation 
        tbody 
          td 
          td(style="font-weight: 600") Financial Convenant
          td  
        tbody 
          td 
          td(style="font-weight: 600") i.
          td  
        tbody 
          td 
          td(style="font-weight: 600") ii.
          td  
        tbody 
          td 
          td(style="font-weight: 600") Non-financial Convenant
          td  
        tbody 
          td 
          td(style="font-weight: 600") i.
          td  
        tbody 
          td 
          td(style="font-weight: 600") ii.
          td
      br
      p 
        strong Note on complexity levels of the rated instrument:
        |  Infomerics has classified instruments rated by it on the basis of complexity and a note thereon is available at www.infomerics.com.
  
          
script().
  let totalVal = document.querySelector(".total_text")
  let dataArray = !{JSON.stringify(rating_data)}
  let total = 0
  for (let i = 0; i < dataArray.length; i++) {
    total += Number(dataArray[i].amount)
  }
  totalVal.innerText = numberToEnglish(Math.floor(total))
  function numberToEnglish(n, custom_join_character) {
    let string = n.toString(),
        units, tens, scales, start, end, chunks, chunksLen, chunk, ints, i, word, words;
    let and = custom_join_character || 'and';
    /* Is number zero? */
    if (parseInt(string) === 0) {
        return 'zero';
    }
    /* Array of units as words */
    units = ['', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'];
    /* Array of tens as words */
    tens = ['', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'];
    /* Array of scales as words */
    scales = ['', 'thousand', 'million', 'billion', 'trillion', 'quadrillion', 'quintillion', 'sextillion', 'septillion', 'octillion', 'nonillion', 'decillion', 'undecillion', 'duodecillion', 'tredecillion', 'quatttuor-decillion', 'quindecillion', 'sexdecillion', 'septen-decillion', 'octodecillion', 'novemdecillion', 'vigintillion', 'centillion'];
    /* Split user arguemnt into 3 digit chunks from right to left */
    start = string.length;
    chunks = [];
    while (start > 0) {
        end = start;
        chunks.push(string.slice((start = Math.max(0, start - 3)), end));
    }
    /* Check if function has enough scale words to be able to stringify the user argument */
    chunksLen = chunks.length;
    if (chunksLen > scales.length) {
        return '';
    }
    /* Stringify each integer in each chunk */
    words = [];
    for (i = 0; i < chunksLen; i++) {
        chunk = parseInt(chunks[i]);
        if (chunk) {
            /* Split chunk into array of individual integers */
            ints = chunks[i].split('').reverse().map(parseFloat);
            /* If tens integer is 1, i.e. 10, then add 10 to units integer */
            if (ints[1] === 1) {
                ints[0] += 10;
            }
            /* Add scale word if chunk is not zero and array item exists */
            if ((word = scales[i])) {
                words.push(word);
            }
            /* Add unit word if array item exists */
            if ((word = units[ints[0]])) {
                words.push(word);
            }
            /* Add tens word if array item exists */
            if ((word = tens[ints[1]])) {
                words.push(word);
            }
            /* Add 'and' string after units or tens integer if: */
            if (ints[0] || ints[1]) {

                /* Chunk has a hundreds integer or chunk is the first of multiple chunks */
                if (ints[2] || !i && chunksLen) {
                    words.push(and);
                }
            }
            /* Add hundreds word if array item exists */
            if ((word = units[ints[2]])) {
                words.push(word + ' hundred');
            }
        }

    }

    return words.reverse().join(' ');

  }
